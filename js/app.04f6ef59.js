(function(e){function t(t){for(var n,a,o=t[0],s=t[1],l=t[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==c[s]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},c={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/cryptonomicon/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),c=(r("4de4"),r("b0c0"),{class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"}),i={key:0,class:"fixed w-100 h-100 opacity-80 bg-purple-800 inset-0 z-50 flex items-center justify-center"},a=Object(n["f"])("svg",{class:"animate-spin -ml-1 mr-3 h-12 w-12 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[Object(n["f"])("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(n["f"])("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),o={key:1,class:"container"},s={key:0},l=Object(n["f"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),u=Object(n["e"])(" Фильтр: "),d=Object(n["f"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),f={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},p={class:"px-4 py-5 sm:p-6 text-center"},b={class:"text-sm font-medium text-gray-500 truncate"},h={class:"mt-1 text-3xl font-semibold text-gray-900"},g=Object(n["f"])("div",{class:"w-full border-t border-gray-200"},null,-1),m=Object(n["f"])("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[Object(n["f"])("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),v=Object(n["e"])("Удалить "),O=Object(n["f"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1);function j(e,t,r,j,y,k){var w=Object(n["i"])("add-ticker"),x=Object(n["i"])("graph");return Object(n["g"])(),Object(n["c"])("div",c,[y.loader?(Object(n["g"])(),Object(n["c"])("div",i,[a])):(Object(n["g"])(),Object(n["c"])("div",o,[Object(n["f"])(w,{onViewAutocomlete:k.sortHelpTickers,helps:y.helps,validTickerName:y.validTickerName,onAddTicker:k.add,disabled:k.tooManyTickersAdded},null,8,["onViewAutocomlete","helps","validTickerName","onAddTicker","disabled"]),y.tickers.length?(Object(n["g"])(),Object(n["c"])("div",s,[l,Object(n["f"])("div",null,[y.page>1?(Object(n["g"])(),Object(n["c"])("button",{key:0,onClick:t[1]||(t[1]=function(e){return y.page=y.page-1}),class:"my-4 mx-2 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Назад ")):Object(n["d"])("",!0),k.hasNextPage?(Object(n["g"])(),Object(n["c"])("button",{key:1,onClick:t[2]||(t[2]=function(e){return y.page=y.page+1}),class:"my-4 mx-2 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Вперед ")):Object(n["d"])("",!0),u,Object(n["l"])(Object(n["f"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return y.filter=e}),type:"text"},null,512),[[n["k"],y.filter]])]),d,Object(n["f"])("dl",f,[(Object(n["g"])(!0),Object(n["c"])(n["a"],null,Object(n["h"])(k.paginatedTickers,(function(e){return Object(n["g"])(),Object(n["c"])("div",{class:["bg-white overflow-hidden shadow rounded-lg border-purple-800 border-solid cursor-pointer",{"border-4":y.selectedTicker===e,"bg-red-100":"-"===e.price}],key:e.name,onClick:function(t){return k.select(e)}},[Object(n["f"])("div",p,[Object(n["f"])("dt",b,Object(n["j"])(e.name),1),Object(n["f"])("dd",h,Object(n["j"])(k.formatPrice(e.price)),1)]),g,Object(n["f"])("button",{onClick:Object(n["n"])((function(t){return k.remove(e)}),["stop"]),class:"flex items-center justify-center font-medium w-full bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 hover:text-gray-600 hover:bg-gray-200 hover:opacity-20 transition-all focus:outline-none"},[m,v],8,["onClick"])],10,["onClick"])})),128))]),O])):Object(n["d"])("",!0),y.selectedTicker?(Object(n["g"])(),Object(n["c"])(x,{key:1,selectedTicker:y.selectedTicker,onClearSelectedTicker:t[4]||(t[4]=function(e){return y.selectedTicker=null}),graph:y.graph},null,8,["selectedTicker","graph"])):Object(n["d"])("",!0)]))])}r("99af"),r("4160"),r("caad"),r("fb6a"),r("b680"),r("4fad"),r("c1f9"),r("d3b7"),r("2532"),r("3ca3"),r("2ca0"),r("159b"),r("ddb0"),r("2b3d");var y=r("2909"),k=r("3835"),w=(r("96cf"),r("1da1")),x=(r("7db0"),r("4ec9"),r("b64b"),r("ac1f"),r("1276"),"50e2c4d5d6f4b0bcadd7f589312f3897c25fc070166bc763f95dad0b1cede926"),T=new Map,C=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=".concat(x)),S=null,E="5",M="500";function N(e){var t=JSON.stringify(e);C.readyState!==WebSocket.OPEN?C.addEventListener("open",(function(){C.send(t)}),{once:!0}):C.send(t)}function A(e){N({action:"SubAdd",subs:["5~CCCAGG~".concat(e,"~USD")]})}function P(e){N({action:"SubRemove",subs:["5~CCCAGG~".concat(e,"~USD")]})}C.addEventListener("message",(function(e){var t,r=JSON.parse(e.data),n=r.TYPE,c=r.FROMSYMBOL,i=r.PRICE,a=r.PARAMETER,o=r.INFO;if(n!==M){if(n===E&&void 0!==i){var s=null!==(t=T.get(c))&&void 0!==t?t:[];s.forEach((function(e){return e(i)}))}}else{var l=a.split("~")[2];if(o.includes("All symbols are uppercase only")||!S.find((function(e){return e===l}))){var u,d=null!==(u=T.get(l))&&void 0!==u?u:[];d.forEach((function(e){return e("-")}))}else console.log("need crosscourse for: ".concat(l))}}));var z=function(e,t){var r=T.get(e)||[];T.set(e,[].concat(Object(y["a"])(r),[t])),A(e)},L=function(e){T.delete(e),P(e)};function G(){return I.apply(this,arguments)}function I(){return I=Object(w["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true").then((function(e){return e.json()})).then((function(e){return e.Data}));case 2:return t=e.sent,S=Object.keys(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var R={class:"flex"},V={class:"max-w-xs"},B=Object(n["f"])("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),H={class:"mt-1 relative rounded-md shadow-md"},D={key:0,class:"flex bg-white shadow-md p-1 rounded-md shadow-md flex-wrap"},W={key:1,class:"text-sm text-red-600"};function _(e,t,r,c,i,a){var o=Object(n["i"])("add-button");return Object(n["g"])(),Object(n["c"])("section",null,[Object(n["f"])("div",R,[Object(n["f"])("div",V,[B,Object(n["f"])("div",H,[Object(n["l"])(Object(n["f"])("input",{autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.ticker=e}),onKeydown:t[2]||(t[2]=Object(n["m"])((function(){return a.add&&a.add.apply(a,arguments)}),["enter"])),onInput:t[3]||(t[3]=function(){return a.autocomplite&&a.autocomplite.apply(a,arguments)}),type:"text",name:"wallet",id:"wallet",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",placeholder:"Например DOGE"},null,544),[[n["k"],i.ticker]])]),i.ticker.length?(Object(n["g"])(),Object(n["c"])("div",D,[(Object(n["g"])(!0),Object(n["c"])(n["a"],null,Object(n["h"])(r.helps,(function(e){return Object(n["g"])(),Object(n["c"])("span",{key:e,onClick:function(t){return a.addFromHelp(e)},class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer"},Object(n["j"])(e),9,["onClick"])})),128))])):Object(n["d"])("",!0),r.validTickerName?Object(n["d"])("",!0):(Object(n["g"])(),Object(n["c"])("div",W," Такой тикер уже добавлен "))])]),Object(n["f"])(o,{onClick:a.add,type:"button",disabled:r.disabled,class:"my-4"},null,8,["onClick","disabled"])])}var q=Object(n["f"])("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[Object(n["f"])("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1),F=Object(n["e"])(" Добавить ");function J(e,t,r,c,i,a){return Object(n["g"])(),Object(n["c"])("button",{type:"button",class:["inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",{"opacity-50":r.disabled}]},[q,F],2)}var U={props:{disabled:{type:Boolean,require:!1,default:!1}}};U.render=J;var $=U,Y={props:{helps:{require:!0,default:!1},disabled:{type:Boolean,require:!1,default:!1},validTickerName:{type:Boolean,require:!0}},emits:{"add-ticker":function(e){return"string"===typeof e&&e.length>0},"view-autocomlete":function(e){return"string"===typeof e&&e.length>0}},components:{AddButton:$},data:function(){return{ticker:""}},methods:{add:function(){this.disabled||(this.$emit("add-ticker",this.ticker),this.ticker="")},addFromHelp:function(e){this.ticker=e,this.add()},autocomplite:function(e){this.$emit("view-autocomlete",e.target.value)}}};Y.render=_;var K=Y,Q={class:"relative"},X={class:"text-lg leading-6 font-medium text-gray-900 my-8"},Z={class:"flex items-end border-gray-600 border-b border-l h-64",ref:"graph"},ee=Object(n["f"])("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",version:"1.1",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[Object(n["f"])("g",null,[Object(n["f"])("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})])],-1);function te(e,t,r,c,i,a){return Object(n["g"])(),Object(n["c"])("section",Q,[Object(n["f"])("h3",X,Object(n["j"])(r.selectedTicker.name),1),Object(n["f"])("div",Z,[(Object(n["g"])(!0),Object(n["c"])(n["a"],null,Object(n["h"])(a.normalizedGraph,(function(e,t){return Object(n["g"])(),Object(n["c"])("div",{key:t,style:{height:"".concat(e,"%")},class:"bg-purple-800 border w-10"},null,4)})),128))],512),Object(n["f"])("button",{onClick:t[1]||(t[1]=function(){return a.clearSelectedTicker&&a.clearSelectedTicker.apply(a,arguments)}),type:"button",class:"absolute top-0 right-0"},[ee])])}r("d81d");var re={props:{selectedTicker:{require:!0},graph:{require:!1}},emits:["clear-selected-ticker"],data:function(){return{maxGraphElements:null}},mounted:function(){var e=this;this.maxGraphElements=this.$refs.graph.clientWidth/38,window.addEventListener("resize",(function(){e.maxGraphElements=e.$refs.graph.clientWidth/38}))},beforeUnmount:function(){window.removeEventListener("resize")},computed:{normalizedGraph:function(){var e=Math.max.apply(Math,Object(y["a"])(this.graph)),t=Math.min.apply(Math,Object(y["a"])(this.graph));if(e===t)return this.graph.map((function(){return 50}));var r=this.graph.map((function(r){return 5+95*(r-t)/(e-t)}));while(r.length>this.maxGraphElements)r.shift();return r}},methods:{clearSelectedTicker:function(){this.$emit("clear-selected-ticker")}}};re.render=te;var ne=re,ce={components:{AddTicker:K,Graph:ne},name:"App",data:function(){return{ticker:"",filter:"",tickers:[],selectedTicker:null,graph:[],page:1,validationData:null,validTickerName:!0,helps:[],loader:!0}},created:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object.fromEntries(new URL(window.location).searchParams.entries()),r.filter&&(e.filter=r.filter),r.page&&(e.page=r.page),n=localStorage.getItem("cryptonomicon-list"),n&&(e.tickers=JSON.parse(n),e.tickers.forEach((function(t){z(t.name,(function(r){return e.updateTicker(t.name,r)}))}))),t.next=7,G();case 7:e.validationData=t.sent,e.loader=!1;case 9:case"end":return t.stop()}}),t)})))()},computed:{tooManyTickersAdded:function(){return this.tickers.length>4},startIndex:function(){return 6*(this.page-1)},endIndex:function(){return 6*this.page},filteredTickers:function(){var e=this;return this.tickers.filter((function(t){return t.name.includes(e.filter)}))},paginatedTickers:function(){return this.filteredTickers.slice(this.startIndex,this.endIndex)},hasNextPage:function(){return this.filteredTickers.length>this.endIndex},pageStateOptions:function(){return{filter:this.filter,page:this.page}}},methods:{updateTicker:function(e,t){var r=this;this.tickers.filter((function(t){return t.name===e})).forEach((function(e){e===r.selectedTicker&&r.graph.push(t),e.price=t}))},sortHelpTickers:function(e){this.validTickerName=!0;for(var t=[],r=0,n=Object.entries(this.validationData);r<n.length;r++){var c=Object(k["a"])(n[r],2),i=c[0],a=c[1];(i.toLowerCase().startsWith(e.toLowerCase())||a.FullName.toLowerCase().startsWith(e.toLowerCase())||a.Symbol.toLowerCase().startsWith(e.toLowerCase()))&&t.push(i)}this.helps=t.slice(0,4)},isValidName:function(e){var t=this,r=!0;return this.tickers.forEach((function(n){n.name===e&&(t.validTickerName=!1,r=!1)})),r},formatPrice:function(e){return"-"===e?e:e>1?e.toFixed(2):e.toPrecision(2)},add:function(e){var t=this,r={name:e,price:"-"};this.tickers=[].concat(Object(y["a"])(this.tickers),[r]),z(r.name,(function(e){return t.updateTicker(r.name,e)}))},select:function(e){"-"!==e.price&&(this.selectedTicker=e)},remove:function(e){this.tickers=this.tickers.filter((function(t){return t!==e})),this.selectedTicker===e&&(this.selectedTicker=null),L(e.name)}},watch:{tickers:function(){localStorage.setItem("cryptonomicon-list",JSON.stringify(this.tickers))},selectedTicker:function(e){this.graph=[],this.$nextTick().then(e)},paginatedTickers:function(){0===this.paginatedTickers.length&&this.page>1&&(this.page-=1)},filter:function(){this.page=1},pageStateOptions:function(e){window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(e.filter,"&page=").concat(e.page))}}};ce.render=j;var ie=ce;r("ba8c");Object(n["b"])(ie).mount("#app")},ba8c:function(e,t,r){}});
//# sourceMappingURL=app.04f6ef59.js.map